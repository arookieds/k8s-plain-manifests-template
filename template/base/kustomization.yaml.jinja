apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: {{ namespace }}

resources:
  - deployment.yaml
{% if service_type != 'None' %}  - service.yaml{% endif %}
{% if use_configmap %}  - configmap.yaml{% endif %}
{% if use_sealed_secrets %}  - sealed-secret.yaml{% endif %}
{% if enable_ingress %}  - ingress.yaml{% endif %}

commonLabels:
  app: {{ project_name }}
  managed-by: kustomize

commonAnnotations:
  project: {{ project_name }}

# Configure container images
# images:
#   - name: {{ container_image.split(':')[0] }}
#     newTag: latest

# Patches for customization
# patches:
#   - path: patches/deployment-patch.yaml
#     target:
#       kind: Deployment
